# Lefthook configuration for AI Toolkit
# https://github.com/evilmartians/lefthook

pre-commit:
  parallel: false # Changed to false to ensure format runs before lint
  commands:
    format:
      run: sh scripts/lefthook/format-files.sh
      tags: format
      skip:
        - merge
        - rebase
      fail_text: 'Formatting failed. Please review the changes.'

    lint:
      run: sh scripts/lefthook/lint.sh
      tags: lint
      skip:
        - merge
        - rebase
      fail_text: 'Linting failed. Please fix the issues before committing.'

    typecheck:
      run: npx nx affected --target=typecheck --base=HEAD~1
      tags: typecheck
      skip:
        - merge
        - rebase
      fail_text: 'Typechecking failed. Please fix the issues before committing.'
